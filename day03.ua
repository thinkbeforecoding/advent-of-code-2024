# "xmul(2,4)&mul[3,7]!^don't()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))"
&fras "input/day03.txt"
# part 1
âŠ‚ :"            "
IsMul! â† â¨¬(0â—Œ)(â¨¬(0â—Œ)(^0â†™âŠ—@).)/â†¥âˆˆ@).â†˜4)â‰"mul("â†™4 .
Mul    â† â¨¬(0â—Œ)(/Ã—âŠœ(â£â‹•0) âŠ¸â‰ @,)=1/+âˆˆ@,.
/+â‰¡(IsMul!Mul) â§ˆâˆ˜12

# "xmul(2,4)&mul[3,7]!^don't()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))"
&fras "input/day03.txt"
âŠ‚ :"            "

IsDo   â† â‰ "do()" â†™4
IsDont â† â‰ "don't()" â†™7

# the input is parsed like this
# [0 x] this is a mul of value x (x=0 when nothing match)
# [1 0] this is a do
# [1 1] this is a don't

# the fold (F) state is
# [d s] where d indicates if summing is disabled, and s is the running total 
# [0 s] [0 x] -> [0 (s+x)] // add x to sum
# [1 s] [0 x] -> [1 s]     // sum is disable, keep existing value
# [_ s] [1 0] -> [0 s]  // enable sum after do 
# [_ s] [1 1] -> [1 s]  // disable sum after don't

F â† â¨¬(â¨¬(âŠ‚ 0 +) (âŠ‚ 1 âŠ™â—Œ) âŠƒâŠ¢âŠ£:)(âŠ‚ âŠ™(â†˜1)) âŠƒâŠ¢âŠ£ :
âŠ£/F â‰¡(â¨¬(â¨¬(âŠ‚ 0 IsMul!Mul)(1_1) IsDont .)(1_0) IsDo .) â§ˆâˆ˜12

# with regex (I only discoverd regex and pattern matching after...)
# Part 1
ğŸ“„  â† &fras "input/day03.txt"
ğŸ“œ  â† "xmul(2,4)&mul[3,7]!^don't()_mul(5,5)+mul(32,64](mul(11,8)undo()?mul(8,5))"
Pâ‚ â† (
  â¬š"" regex "mul\\((\\d{1,3}),(\\d{1,3})\\)"
  /+â‰¡(Ã— â‹• âŠ™â‹• Â°âŠŸ â†˜1))

# Part 2
Pâ‚‚ â† (
  â¬š"" regex "don't\\(\\)|do\\(\\)|mul\\((\\d{1,3}),(\\d{1,3})\\)"
  â‰¡(â£(1_1 â—Œ Â°(âŠ‚ â–¡"don't()")
    | 1_0 â—Œ Â°(âŠ‚ â–¡"do()")
    | [0 /Ã—â‹•â†˜1]))
  âŠ£/(
    â£(âŠ‚1â†˜1 Â°[1 1]:
    | âŠ‚0â†˜1 Â°[1 0]:
    | âŠ‚1 âŠ™â—Œ Â°[1 âˆ˜]
    | âœÂ°âŠŸ(âŠ™+) âœ:(Â°[0 âˆ˜])))
)

[âŠƒPâ‚Pâ‚‚] ğŸ“„
